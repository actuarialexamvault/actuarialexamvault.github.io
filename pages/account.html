<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Account Settings - ExamVault</title>
    <link rel="icon" type="image/svg+xml" href="../favicon.svg">
    <link rel="stylesheet" href="../css/dashboard-styles.css">
    <!-- Load theme immediately to prevent flash -->
    <script>
        (function() {
            const savedTheme = localStorage.getItem('theme') || localStorage.getItem('userTheme') || 'light';
            document.documentElement.setAttribute('data-theme', savedTheme);
            
            window.addEventListener('DOMContentLoaded', function() {
                const logoImages = document.querySelectorAll('.logo-icon');
                const logoSrc = savedTheme === 'dark' ? '../favicon.svg' : '../favicon-light.svg';
                logoImages.forEach(img => img.src = logoSrc);
            });
        })();
    </script>
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <a href="dashboard.html" class="logo">
                <img src="../favicon-light.svg" alt="ExamVault Logo" class="logo-icon">
                <span class="logo-text"><span class="logo-exam">Exam</span><span class="logo-vault">Vault</span></span>
            </a>
            <div class="nav-right">
                <div class="nav-links">
                    <a href="dashboard.html" class="nav-link">HOME</a>
                    <a href="account.html" class="nav-link">ACCOUNT</a>
                    <button class="btn-signout-nav" id="signOutBtn">SIGN OUT</button>
                </div>
            </div>
        </div>
    </nav>

    <main class="dashboard-container">
        <div class="dashboard-content">
            <div class="page-header">
                <h1>Account Settings</h1>
                <p>Manage your profile and preferences</p>
            </div>

            <!-- Account Information Section -->
            <div class="settings-section">
                <div class="section-header">
                    <h2>Account Information</h2>
                </div>
                <div class="settings-card">
                    <div class="setting-row">
                        <div class="setting-label">
                            <strong>Email</strong>
                            <p class="setting-description">Your account email address</p>
                        </div>
                        <div class="setting-value">
                            <span id="userEmail">Loading...</span>
                        </div>
                    </div>
                    <div class="setting-row">
                        <div class="setting-label">
                            <strong>Display Name</strong>
                            <p class="setting-description">How your name appears in the app</p>
                        </div>
                        <div class="setting-value">
                            <span id="displayName">Loading...</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Exam Preferences Section -->
            <div class="settings-section">
                <div class="section-header">
                    <h2>Exam Preferences</h2>
                </div>
                <div class="settings-card">
                    <div class="setting-row">
                        <div class="setting-label">
                            <strong>Focus Exam</strong>
                            <p class="setting-description">Set your current exam to streamline navigation and personalize your dashboard analytics</p>
                        </div>
                        <div class="setting-value">
                            <select id="primaryExam" class="exam-select">
                                <option value="">No exam selected</option>
                                <option value="A211">A211 - Actuarial Mathematics</option>
                                <option value="A311">A311 - Actuarial Risk Management</option>
                                <option value="N211">N211 - Communications</option>
                                <option value="F101">F101 - Health and Care</option>
                                <option value="F102">F102 - Life Insurance</option>
                                <option value="F103">F103 - General Insurance</option>
                                <option value="F104">F104 - Pensions and Other Benefits</option>
                                <option value="F105">F105 - Finance and Investment</option>
                                <option value="F106">F106 - Enterprise Risk Management</option>
                            </select>
                            <button class="btn-primary" id="savePrimaryExamBtn" style="margin-top: 0.5rem; display: none;">Save Changes</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Study Plan Section -->
            <div class="settings-section" id="study-plan">
                <div class="section-header">
                    <h2>Study Plan</h2>
                </div>
                <div class="settings-card">
                    <div class="setting-row">
                        <div class="setting-label">
                            <strong>Exam Date</strong>
                            <p class="setting-description">When is your exam scheduled?</p>
                        </div>
                        <div class="setting-value">
                            <input type="date" id="examDate" class="form-input" style="padding: 0.75rem; border: 1px solid var(--border-color); border-radius: 6px; background: var(--bg-card); color: var(--text-primary);">
                        </div>
                    </div>
                    <div class="setting-row">
                        <div class="setting-label">
                            <strong>Study Hours Per Day</strong>
                            <p class="setting-description">How many hours can you dedicate to studying each day?</p>
                        </div>
                        <div class="setting-value">
                            <input type="number" id="hoursPerDay" class="form-input" min="0.5" max="24" step="0.5" placeholder="e.g., 2" style="padding: 0.75rem; border: 1px solid var(--border-color); border-radius: 6px; background: var(--bg-card); color: var(--text-primary);">
                        </div>
                    </div>
                    <div class="setting-row">
                        <div class="setting-label">
                            <strong>Study Days Per Week</strong>
                            <p class="setting-description">How many days per week do you plan to study?</p>
                        </div>
                        <div class="setting-value">
                            <input type="number" id="daysPerWeek" class="form-input" min="1" max="7" step="1" placeholder="e.g., 5" style="padding: 0.75rem; border: 1px solid var(--border-color); border-radius: 6px; background: var(--bg-card); color: var(--text-primary);">
                        </div>
                    </div>
                    <div class="setting-row">
                        <div class="setting-label">
                            <strong>Study Goal</strong>
                            <p class="setting-description">What type of practice do you want to focus on?</p>
                        </div>
                        <div class="setting-value">
                            <select id="studyGoal" class="form-input" style="padding: 0.75rem; border: 1px solid var(--border-color); border-radius: 6px; background: var(--bg-card); color: var(--text-primary);">
                                <option value="chapters">Practice chapter questions</option>
                                <option value="exams">Practice full exams</option>
                            </select>
                        </div>
                    </div>
                    <button class="btn-primary" id="saveStudyPlanBtn" style="margin-top: 1rem; display: none;">Save Study Plan</button>
                </div>
            </div>

            <!-- Data Management Section -->
            <div class="settings-section">
                <div class="section-header">
                    <h2>Data Management</h2>
                </div>
                <div class="settings-card">
                    <div class="setting-row">
                        <div class="setting-label">
                            <strong>Clear All Attempt History</strong>
                            <p class="setting-description">Permanently delete all your question attempts, grades, and progress data. This action cannot be undone.</p>
                        </div>
                        <div class="setting-value">
                            <button class="btn-danger" id="clearHistoryBtn">Clear History</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Quick Actions Section -->
            <div class="settings-section">
                <div class="section-header">
                    <h2>Quick Actions</h2>
                </div>
                <div class="action-cards">
                    <a href="dashboard.html" class="action-card">
                        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <rect x="3" y="3" width="7" height="7" rx="1" stroke="currentColor" stroke-width="2"/>
                            <rect x="14" y="3" width="7" height="7" rx="1" stroke="currentColor" stroke-width="2"/>
                            <rect x="3" y="14" width="7" height="7" rx="1" stroke="currentColor" stroke-width="2"/>
                            <rect x="14" y="14" width="7" height="7" rx="1" stroke="currentColor" stroke-width="2"/>
                        </svg>
                        <h3>Dashboard</h3>
                        <p>View your overview</p>
                    </a>
                    <a href="practice-by-chapter.html" class="action-card">
                        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M2 3H8C9.06087 3 10.0783 3.42143 10.8284 4.17157C11.5786 4.92172 12 5.93913 12 7V21C12 20.2044 11.6839 19.4413 11.1213 18.8787C10.5587 18.3161 9.79565 18 9 18H2V3Z" stroke="currentColor" stroke-width="2"/>
                            <path d="M22 3H16C14.9391 3 13.9217 3.42143 13.1716 4.17157C12.4214 4.92172 12 5.93913 12 7V21C12 20.2044 12.3161 19.4413 12.8787 18.8787C13.4413 18.3161 14.2044 18 15 18H22V3Z" stroke="currentColor" stroke-width="2"/>
                        </svg>
                        <h3>Practice</h3>
                        <p>Browse subjects</p>
                    </a>
                    <a href="progress-tracker.html" class="action-card">
                        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M22 12H18L15 21L9 3L6 12H2" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        <h3>Progress Tracker</h3>
                        <p>Track your performance</p>
                    </a>
                </div>
            </div>
        </div>
    </main>

    <!-- Confirmation Modal -->
    <div id="confirmModal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <div class="modal-icon warning">
                <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M12 9V13M12 17H12.01M5.07183 19H18.9282C20.4678 19 21.4301 17.3333 20.6603 16L13.7321 4C12.9623 2.66667 11.0377 2.66667 10.2679 4L3.33975 16C2.56995 17.3333 3.53223 19 5.07183 19Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </div>
            <h2>Clear All Attempt History?</h2>
            <p>This will permanently delete all your question attempts, grades, and progress data. This action cannot be undone.</p>
            <p style="color: #dc2626; font-weight: 600; margin-top: 1rem;">Are you absolutely sure?</p>
            <div class="modal-buttons">
                <button class="modal-btn modal-btn-secondary" id="cancelBtn">Cancel</button>
                <button class="modal-btn modal-btn-danger" id="confirmClearBtn">Yes, Clear Everything</button>
            </div>
        </div>
    </div>

    <script type="module" src="../js/account-script.js"></script>
</body>
</html>

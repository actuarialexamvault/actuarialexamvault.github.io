<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - ExamVault</title>
    <link rel="icon" type="image/svg+xml" href="../favicon.svg">
    <link rel="stylesheet" href="../css/dashboard-styles.css">
    <!-- Load theme immediately to prevent flash -->
    <script>
        (function() {
            // Check both 'theme' (from landing/auth pages) and 'userTheme' (from Firebase)
            const savedTheme = localStorage.getItem('theme') || localStorage.getItem('userTheme') || 'light';
            document.documentElement.setAttribute('data-theme', savedTheme);
            
            // Set initial logo based on theme
            window.addEventListener('DOMContentLoaded', function() {
                const logoImages = document.querySelectorAll('.logo-icon');
                const logoSrc = savedTheme === 'dark' ? '../favicon.svg' : '../favicon-light.svg';
                logoImages.forEach(img => img.src = logoSrc);
            });
        })();
    </script>
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <a href="dashboard.html" class="logo">
                <img src="../favicon-light.svg" alt="ExamVault Logo" class="logo-icon">
                <span class="logo-text"><span class="logo-exam">Exam</span><span class="logo-vault">Vault</span></span>
            </a>
            <div class="nav-right">
                <div class="user-info">
                    <span class="user-name" id="userName"></span>
                </div>
                <button class="theme-toggle" id="themeToggle" aria-label="Toggle theme">
                    <svg class="theme-icon sun-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <circle cx="12" cy="12" r="5" stroke="currentColor" stroke-width="2"/>
                        <path d="M12 1V3M12 21V23M4.22 4.22L5.64 5.64M18.36 18.36L19.78 19.78M1 12H3M21 12H23M4.22 19.78L5.64 18.36M18.36 5.64L19.78 4.22" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                    <svg class="theme-icon moon-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </button>
                <button class="btn-signout" id="signOutBtn">Sign Out</button>

            </div>
        </div>
    </nav>

    <main class="dashboard-container">
        <div class="dashboard-header">
            <h1 class="dashboard-title">Welcome, <span id="userNameTitle"></span>!</h1>
            <p class="dashboard-subtitle"><b>Vault</b> Over The Hurdles. Unlock Your <b>Future</b>.</p>
        </div>

        <div class="session-info" id="continueSection" style="display: none;">
            <a href="#" class="continue-card" id="continueCard">
                <svg class="continue-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M9 18L15 12L9 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <div class="continue-details">
                    <h3>Continue Where You Left Off</h3>
                    <p class="continue-note" id="continueSubject">Loading...</p>
                </div>
                <svg class="continue-arrow" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M5 12H19M19 12L12 5M19 12L12 19" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </a>
        </div>

        <div class="dashboard-grid">
            <div class="dashboard-card">
                <div style="display: flex; align-items: center; gap: 0.75rem;">
                    <div class="card-icon">
                        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M2 3H8C9.06087 3 10.0783 3.42143 10.8284 4.17157C11.5786 4.92172 12 5.93913 12 7V21C12 20.2044 11.6839 19.4413 11.1213 18.8787C10.5587 18.3161 9.79565 18 9 18H2V3Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M22 3H16C14.9391 3 13.9217 3.42143 13.1716 4.17157C12.4214 4.92172 12 5.93913 12 7V21C12 20.2044 12.3161 19.4413 12.8787 18.8787C13.4413 18.3161 14.2044 18 15 18H22V3Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </div>
                    <div style="background: #fff3cd; color: #856404; padding: 0.35rem 0.75rem; border-radius: 20px; font-size: 0.7rem; font-weight: 600; border: 1px solid #ffeaa7; white-space: nowrap;">
                        Only available for F102
                    </div>
                </div>
                <h2>Practice by Chapter</h2>
                <p>Work through topic-based question sets to build mastery by chapter.</p>

                <a href="subjects.html?mode=practice" class="card-link">Practice →</a>
            </div>

            <div class="dashboard-card">
                <div class="card-icon">
                    <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M18 20V10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M12 20V4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M6 20V14" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </div>
                <h2>Past Papers</h2>
                <p>Practice exam papers in a simulated exam environment and monitor your progress</p>
                <a href="progress-tracker.html" class="card-link">View Progress →</a>
            </div>

            <div class="dashboard-card">
                <div class="card-icon">
                    <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
                        <path d="M12 16V12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <circle cx="12" cy="8" r="0.5" fill="currentColor" stroke="currentColor" stroke-width="1"/>
                    </svg>
                </div>
                <h2>Help & Support</h2>
                <p>Get help with the platform or exams</p>
                <a href="help-support.html" class="card-link">Get Help →</a>
            </div>
        </div>

       
    </main>

    <footer class="footer">
    <p>&copy; Open Source under MIT License </p>
    </footer>

    <!-- Sign out confirmation modal (reuses project modal styles) -->
    <div id="signoutConfirmModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <svg class="modal-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
                    <path d="M12 8V12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    <circle cx="12" cy="16" r="1" fill="currentColor"/>
                </svg>
                <h2>Confirm</h2>
            </div>
            <div class="modal-body">
                <p id="signoutConfirmMessage">Are you sure you want to sign out?</p>
            </div>
            <div class="modal-footer">
                <button class="btn-primary" id="signoutConfirmYes">Yes</button>
                <button class="btn-secondary" id="signoutConfirmNo">No</button>
            </div>
        </div>
    </div>

    <script type="module" src="../js/dashboard-script.js"></script>
</body>
</html>

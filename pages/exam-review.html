<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Exam Review - Actuarial Exam Vault</title>
    <link rel="stylesheet" href="../css/exam-review-styles.css">
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <a href="dashboard.html" class="logo">
                <svg class="logo-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M9 11L12 14L22 4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M21 12V19C21 19.5304 20.7893 20.0391 20.4142 20.4142C20.0391 20.7893 19.5304 21 19 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H16" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <span class="logo-text">Actuarial Exam Vault</span>
            </a>
            <div class="nav-links">
                <a href="subjects.html" class="nav-link">SUBJECTS</a>
                <a href="dashboard.html" class="nav-link">ACCOUNT</a>
                <button class="btn-signout-nav" id="signOutBtn">SIGN OUT</button>
            </div>
        </div>
    </nav>

    <main class="review-container">
        <!-- Header Section -->
        <div class="review-header">
            <div class="header-content">
                <h1 class="review-title" id="reviewTitle">Exam Review</h1>
                <p class="review-subtitle" id="reviewSubtitle">Review your exam attempt and grade your answers</p>
                <div class="exam-meta" id="examMeta">
                    <span class="meta-item">
                        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <rect x="3" y="4" width="18" height="18" rx="2" ry="2" stroke="currentColor" stroke-width="2"/>
                            <line x1="16" y1="2" x2="16" y2="6" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                            <line x1="8" y1="2" x2="8" y2="6" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                            <line x1="3" y1="10" x2="21" y2="10" stroke="currentColor" stroke-width="2"/>
                        </svg>
                        <span id="submissionDate">Loading...</span>
                    </span>
                </div>
            </div>
        </div>

        <!-- Download Section -->
        <div class="download-section">
            <h2>Downloads</h2>
            <div class="download-buttons">
                <button class="btn-download" id="downloadAttemptBtn">
                    <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M21 15V19C21 19.5304 20.7893 20.0391 20.4142 20.4142C20.0391 20.7893 19.5304 21 19 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M7 10L12 15L17 10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M12 15V3" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    Download My Attempt
                </button>
                <button class="btn-download" id="downloadMemoBtn">
                    <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M21 15V19C21 19.5304 20.7893 20.0391 20.4142 20.4142C20.0391 20.7893 19.5304 21 19 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M7 10L12 15L17 10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M12 15V3" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    Download Examiners Report
                </button>
            </div>
        </div>

        <!-- Grading Table Section -->
        <div class="grading-section">
            <div class="section-header-bar">
                <h2>Question Grading</h2>
                <div class="table-controls">
                    <button class="btn-control" id="addRowBtn">
                        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
                            <line x1="12" y1="8" x2="12" y2="16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                            <line x1="8" y1="12" x2="16" y2="12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                        Add Question
                    </button>
                    <button class="btn-control" id="removeRowBtn">
                        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
                            <line x1="8" y1="12" x2="16" y2="12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                        Remove Last
                    </button>
                </div>
            </div>

            <div class="table-container">
                <table class="grading-table">
                    <thead>
                        <tr>
                            <th>DATE</th>
                            <th>QUESTION</th>
                            <th>MARKER</th>
                            <th>SCORE</th>
                            <th>GRADE</th>
                            <th>ACTIONS</th>
                        </tr>
                    </thead>
                    <tbody id="gradingTableBody">
                        <!-- Rows will be added dynamically -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Back Button -->
        <div class="action-buttons">
            <button class="btn-back" id="backBtn">
                <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M19 12H5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M12 19L5 12L12 5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                Back to Progress Tracker
            </button>
        </div>
    </main>

    <!-- Review Type Selection Modal -->
    <div id="reviewTypeModal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <div class="modal-icon info">
                <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
                    <path d="M12 8V12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    <circle cx="12" cy="16" r="1" fill="currentColor"/>
                </svg>
            </div>
            <h2>Choose Review Type</h2>
            <p>How would you like to review this question?</p>
            <div class="modal-buttons">
                <button class="modal-btn modal-btn-primary" id="selfReviewBtn">Self-Review</button>
                <button class="modal-btn modal-btn-secondary" id="aiReviewBtn">AI-Review</button>
            </div>
        </div>
    </div>

    <!-- AI Review Instructions Modal -->
    <div id="aiInstructionsModal" class="modal-overlay" style="display: none;">
        <div class="modal-content ai-instructions">
            <div class="modal-icon success">
                <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
                    <path d="M9 11L12 14L22 4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </div>
            <h2>AI Review Instructions</h2>
            <p>Use your preferred AI tool (ChatGPT, Claude, etc.) with the following prompt:</p>
            
            <div class="prompt-container">
                <textarea id="aiPromptText" readonly>You are a strict Actuarial board exam marker. You are known for producing the best Actuaries, known for their competence, strong professional and analytical skills hence you look for the clear demonstration of these factors when marking exam questions. When you mark a question you do not assign marks leniently, you stick to what was asked vs what is expected. You expect students to know and apply the core concepts that are being tested to demonstrate the competency that is expected of an Actuary. 

Your quantitative feedback should rate the attempt across the following key dimensions:  
1. Key ideas identified (0-10): The student understood what was being asked and identified the key concepts clearly.
2. Use of information provided (0-10): Effective use of the key pieces of information in the answer.
3. Conciseness (0-10): Answer is clear and to the point, ensuring no time was wasted.
4. Idea generation (0-10): Provided a sufficient number of distinct ideas.

The Final Grade & score depends on the number of points that the student articulated against what is in the memo. 
Mark allocation: One valid point is equivalent to a 0.5 mark. That is, if a question has 2 marks available then the student should give 4 valid and distinct points. If the point is not directly mentioned in the memo use the spirit of the memo wording to award marks if what the student said is in line with what is expected. 

Your summary feedback to the student should be brief and focus on identifying weak areas and topics that require further study.</textarea>
            </div>

            <div class="modal-buttons">
                <button class="modal-btn modal-btn-primary" id="copyPromptBtn">
                    <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="width: 20px; height: 20px; margin-right: 8px;">
                        <rect x="9" y="9" width="13" height="13" rx="2" ry="2" stroke="currentColor" stroke-width="2"/>
                        <path d="M5 15H4C3.46957 15 2.96086 14.7893 2.58579 14.4142C2.21071 14.0391 2 13.5304 2 13V4C2 3.46957 2.21071 2.96086 2.58579 2.58579C2.96086 2.21071 3.46957 2 4 2H13C13.5304 2 14.0391 2.21071 14.4142 2.58579C14.7893 2.96086 15 3.46957 15 4V5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    Copy Prompt
                </button>
                <button class="modal-btn modal-btn-secondary" id="closeAiInstructionsBtn">Close</button>
            </div>
        </div>
    </div>

    <script type="module" src="../js/exam-review-script.js"></script>
</body>
</html>
